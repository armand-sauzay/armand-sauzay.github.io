<!DOCTYPE html>
<html lang="en">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="UTF-8" />
  <title>Armand Sauzay</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  
  <link rel="stylesheet" href="/css/output.css">
  
  
  <link rel="stylesheet" href="/css/syntax.css">
  
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body class="min-h-screen flex flex-col font-sans">
  <header>
  <div class="max-w-5xl mx-auto flex items-center justify-between px-6 py-5 border-b border-gray-200">
    <a href="/" class="text-green-800 font-bold text-xl hover:text-green-900">armandsauzay</a>
    <nav class="flex items-center space-x-8">
      <a href="/articles" class="flex items-center gap-1 text-gray-700 hover:text-green-800">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-book-open-icon lucide-book-open"><path d="M12 7v14"/><path d="M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"/></svg>
        Articles
      </a>
      <a href="/projects" class="flex items-center gap-1 text-gray-700 hover:text-green-800">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-code-xml-icon lucide-code-xml"><path d="m18 16 4-4-4-4"/><path d="m6 8-4 4 4 4"/><path d="m14.5 4-5 16"/></svg>
        Projects
      </a>
      <a href="/creative-lab" class="flex items-center gap-1 text-gray-700 hover:text-green-800">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-brain-icon lucide-brain"><path d="M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z"/><path d="M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z"/><path d="M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4"/><path d="M17.599 6.5a3 3 0 0 0 .399-1.375"/><path d="M6.003 5.125A3 3 0 0 0 6.401 6.5"/><path d="M3.477 10.896a4 4 0 0 1 .585-.396"/><path d="M19.938 10.5a4 4 0 0 1 .585.396"/><path d="M6 18a4 4 0 0 1-1.967-.516"/><path d="M19.967 17.484A4 4 0 0 1 18 18"/></svg>
        Creative Lab
      </a>
    </nav>
  </div>
</header>
  <main class="flex flex-1 flex-col">
    
<article class="mx-auto px-6 py-8" style="max-width: 44rem;">
  <header class="mb-12">
    <h1 class="text-4xl font-bold text-gray-900 mb-6">Enhance Your CI Workflow with Pre-Commit Checks</h1>
    
    
    
    
    
    <div class="mb-6">
      
<div class="flex items-center text-sm text-gray-500">
  <span>7 Jun 2022</span>
  <span class="px-2">•</span>
  <span>4 min read</span>
  
  <span class="px-2">•</span>
  <div class="flex flex-wrap gap-2">
    
    <span class="bg-gray-100 px-2 py-1 rounded text-xs">CI/CD</span>
    
  </div>
  
</div>
    </div>
  </header>
  
  <div class="article-content">
    <p>We&rsquo;ve all encountered commit messages like <code>test</code>, <code>modif</code>, or <code>reran notebook</code>. These vague messages make navigating the commit history unnecessarily challenging. Additionally, inconsistent file formatting can cause friction in collaborative environments, leading to wasted time resolving trivial issues after commits.</p>
<p>Fortunately, you can proactively address these problems with <strong>pre-commit checks</strong>, ensuring both commit messages and file formats are correct <strong>before</strong> they reach your repository.</p>
<h2 id="what-are-pre-commit-checks">What are Pre-Commit Checks?</h2>
<p><strong>Pre-commit checks</strong> are automated scripts executed right before you commit code. They enforce predefined standards, such as file formatting rules (e.g., Python’s Black formatter) and structured commit messages (like Conventional Commits). By catching issues early, pre-commit checks help maintain a clean, readable, and consistent codebase.</p>
<p>Key benefits include:</p>
<ul>
<li><strong>Clear and informative</strong> commit history</li>
<li><strong>Uniform</strong> formatting across all files</li>
<li><strong>Reduced time</strong> spent troubleshooting trivial issues</li>
</ul>
<p>Let’s walk through setting up pre-commit checks in your GitHub repository.</p>
<h2 id="setting-up-pre-commit-checks">Setting Up Pre-Commit Checks</h2>
<h3 id="step-1-install-pre-commit">Step 1: Install Pre-Commit</h3>
<p>If you&rsquo;re using Homebrew on macOS, run:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">brew install pre-commit
</span></span></code></pre></div><p>For other operating systems, check the <a href="https://pre-commit.com/#installation">official installation guide</a>.</p>
<h3 id="step-2-configure-your-repository">Step 2: Configure Your Repository</h3>
<p>Create two essential files at the root of your repository:</p>
<ul>
<li><code>.pre-commit-config.yaml</code>: Specifies the checks to run.</li>
<li><code>.commitlintrc.yaml</code>: Configures commit message formatting rules.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c">#.commitlintrc.yaml</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">extends</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="s2">&#34;@commitlint/config-conventional&#34;</span><span class="w">
</span></span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c"># .pre-commit-config.yaml</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">repos</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">repo</span><span class="p">:</span><span class="w"> </span><span class="l">https://github.com/pre-commit/pre-commit-hooks</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">rev</span><span class="p">:</span><span class="w"> </span><span class="l">v4.6.0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">hooks</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l">check-yaml</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l">end-of-file-fixer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l">trailing-whitespace</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">repo</span><span class="p">:</span><span class="w"> </span><span class="l">https://github.com/alessandrojcm/commitlint-pre-commit-hook</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">rev</span><span class="p">:</span><span class="w"> </span><span class="l">v9.4.2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">hooks</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l">commitlint</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">stages</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="l">commit-msg]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">additional_dependencies</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;@commitlint/config-conventional&#34;</span><span class="p">]</span><span class="w">
</span></span></span></code></pre></div><h3 id="step-3-run-the-checks">Step 3: Run the checks</h3>
<p>Now, when you commit code, these checks will automatically run, ensuring that:</p>
<ul>
<li>YAML files are correctly formatted.</li>
<li>Files end with a newline (necessary for some systems).</li>
<li>No trailing whitespace remains.</li>
<li>Commit messages adhere to <a href="https://www.conventionalcommits.org/en/v1.0.0/">Conventional Commits</a>.</li>
</ul>
<p>Try it out with a sample commit:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git add .pre-commit-config.yaml .commitlintrc.yaml
</span></span><span class="line"><span class="cl">git commit -m <span class="s2">&#34;feat: enable pre-commit checks for formatting and commit messages&#34;</span>
</span></span></code></pre></div><h2 id="appendix">Appendix</h2>
<h3 id="conventional-commits-format">Conventional Commits Format</h3>
<p>The Conventional Commits specification ensures clear commit messaging. The structure is as follows:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">&lt;type&gt;[optional scope]: &lt;description&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">[optional body]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">[optional footer(s)]
</span></span></code></pre></div><h4 id="example">Example:</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">feat(config): allow provided config object to extend other configs
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">BREAKING CHANGE: `extends` key in config file now extends other config files
</span></span></code></pre></div><h3 id="adding-python-formatting-with-black">Adding Python Formatting with Black</h3>
<p>To integrate Python’s Black formatter, append the following to your <code>.pre-commit-config.yaml</code> file:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl">- <span class="nt">repo</span><span class="p">:</span><span class="w"> </span><span class="l">https://github.com/psf/black</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">rev</span><span class="p">:</span><span class="w"> </span><span class="m">21.</span><span class="l">12b0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">hooks</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l">black</span><span class="w">
</span></span></span></code></pre></div><hr>
<hr>
<h2 id="tags-cicd-pre-commit">title: &ldquo;Pre-commit Checks to Format Your Files and Commit Messages&rdquo;
date: 2022-06-07
draft: false
description: &ldquo;Stop committing wrongly formatted code and start using pre-commit checks.&rdquo;
tags: [&ldquo;CI/CD&rdquo;, &ldquo;pre-commit&rdquo;]</h2>
<p>Effective commit messages and consistent file formatting greatly enhance collaboration and productivity in software projects. Instead of struggling with unclear commit messages like <code>test</code>, <code>modif</code>, or <code>reran notebook</code>, or wasting time fixing formatting issues post-commit, you can proactively ensure clarity and consistency before any code gets committed.</p>
<p>This is where pre-commit checks come into play. These checks automatically enforce formatting standards (such as Python&rsquo;s Black formatter) and commit message conventions (like Conventional Commits) at the time of committing. By catching issues early, they help prevent vague commit messages and formatting inconsistencies.</p>
<p>In essence, pre-commit checks streamline your development workflow, reducing unnecessary follow-up commits and improving the readability and maintainability of your project&rsquo;s history.</p>
<p>Let&rsquo;s explore how you can easily implement these valuable practices in your GitHub repository. (If you&rsquo;re unfamiliar with Conventional Commits, refer to the appendix first, then return here.)</p>
<h2 id="get-started-with-pre-commit-checks">Get started with pre-commit checks</h2>
<h3 id="step-1-install-pre-commit-1">Step 1: Install pre-commit</h3>
<p>To install pre-commit, simply run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">brew install pre-commit
</span></span></code></pre></div><p>This will install pre-commit on your machine.</p>
<h3 id="step-2-add-pre-commit-checks-to-your-repo">Step 2: Add pre-commit checks to your repo</h3>
<p>To be able to add pre-commit checks that make sure your files and commit messages are correctly formatted, you simply need to add <strong>2 files</strong> at the root of your repo:</p>
<ul>
<li><strong>.pre-commit-config.yaml</strong>: defines the checks you want to run</li>
<li><strong>.commitlintrc.yaml</strong>: defines the npm package you use for pre commits.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c"># .commitlintrc.yaml</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">extends</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="s2">&#34;@commitlint/config-conventional&#34;</span><span class="w">
</span></span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c"># .pre-commit-config.yaml</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">repos</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">repo</span><span class="p">:</span><span class="w"> </span><span class="l">https://github.com/pre-commit/pre-commit-hooks</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">rev</span><span class="p">:</span><span class="w"> </span><span class="l">v2.3.0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">hooks</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l">check-yaml</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l">end-of-file-fixer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l">trailing-whitespace</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">repo</span><span class="p">:</span><span class="w"> </span><span class="l">https://github.com/alessandrojcm/commitlint-pre-commit-hook</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">rev</span><span class="p">:</span><span class="w"> </span><span class="l">v8.0.0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">hooks</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l">commitlint</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">stages</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="l">commit-msg]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">additional_dependencies</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;@commitlint/config-conventional&#34;</span><span class="p">]</span><span class="w">
</span></span></span></code></pre></div><p>Once you added those files, you can try adding a commit, the pre commit checks defined will make sure that:</p>
<ul>
<li>yaml files are correctly formatted</li>
<li>files have an extra empty line at the end (this is considered best practice as some systems fail when this condition is not met)</li>
<li>get rid of trailing whitespaces</li>
<li>make sure that the commits follow the <a href="https://www.conventionalcommits.org/en/v1.0.0/">conventional commits</a> format.</li>
</ul>
<p>To see if this worked, try to commit those files to your repo with some commit message like
git commit -m &lsquo;feat: enabled pre-commit checks&rsquo;</p>
<h2 id="apendix">Apendix</h2>
<p><strong>Appendix 1</strong>: A word on Conventional Commits
With conventional commits, the commit message should be structured as follows:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;type&gt;[optional scope]: &lt;description&gt;
</span></span><span class="line"><span class="cl">[optional body]
</span></span><span class="line"><span class="cl">[optional footer(s)]
</span></span></code></pre></div><p>For example (from commit conventional docs):</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="n">feat</span><span class="p">:</span><span class="w"> </span><span class="n">allow</span><span class="w"> </span><span class="n">provided</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">extend</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">configs</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">BREAKING</span><span class="w"> </span><span class="k">CHANGE</span><span class="p">:</span><span class="w"> </span><span class="o">`</span><span class="n">extends</span><span class="o">`</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">extending</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="n">files</span><span class="w">
</span></span></span></code></pre></div><p><strong>Appendix 2</strong>: adding a python code formatter to pre-commit checks. If you want to add a python code formatter, like black, you can append to the end of .pre-commit-config.yaml</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl">- <span class="nt">repo</span><span class="p">:</span><span class="w"> </span><span class="l">https://github.com/psf/black</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">rev</span><span class="p">:</span><span class="w"> </span><span class="m">21.</span><span class="l">12b0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">hooks</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l">black</span><span class="w">
</span></span></span></code></pre></div>
  </div>
</article>

  </main>
  <footer class="py-5 text-center text-gray-500 text-sm mt-auto">
  <div class="mx-auto flex justify-center items-center gap-8 px-4">
    <div class="flex gap-8 items-center">
      <a href="https://github.com/armandsauzay" target="_blank" class="text-gray-500 hover:text-green-800" aria-label="GitHub">
        
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github-icon lucide-github"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"/><path d="M9 18c-4.51 2-5-2-7-2"/></svg>
      </a>
      <a href="https://linkedin.com/in/armandsauzay" target="_blank" class="text-gray-500 hover:text-green-800" aria-label="LinkedIn">
        
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-linkedin-icon lucide-linkedin"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/><rect width="4" height="12" x="2" y="9"/><circle cx="4" cy="4" r="2"/></svg>
      </a>
      <a href="mailto:sauzayarmand@gmail.com" class="text-gray-500 hover:text-green-800" aria-label="Email">
        
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-mail-icon lucide-mail"><path d="m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7"/><rect x="2" y="4" width="20" height="16" rx="2"/></svg>
      </a>
    </div>
    <div class="font-medium text-sm">© armandsauzay</div>
  </div>
</footer>
</body>
</html>
